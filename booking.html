
<!DOCTYPE html>
<html>



<head>
      <title>Booking</title>
      <script type = "text/javascript" src = "js/vue.js"></script>


<meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/style.css" >

    <link rel="stylesheet" href="css/login.css" >

	
	<script>

(function() {
	function toJSONString( form ) {
		var obj = {};
		var elements = form.querySelectorAll( "input, select, textarea" );
		for( var i = 0; i < elements.length; ++i ) {
			var element = elements[i];
			var name = element.name;
			var value = element.value;

			if( name ) {
				obj[ name ] = value;
			}
		}

		return JSON.stringify( obj );
	}

	document.addEventListener( "DOMContentLoaded", function() {
		var form = document.getElementById( "test" );
		var output = document.getElementById( "output" );
		form.addEventListener( "submit", function( e ) {
			e.preventDefault();
			var json = toJSONString( this );
			output.innerHTML = json;

		}, false);

	});

})();

	</script>
	

	
	
	
</head>



<body>

<div class="main" style="padding:5%">

  	<h1>Booking</h1>

<form name="bookto" id="test" action="#" method="post" onSubmit="validateForm()">


  	<h3>Personal details</h3>
	
Name of person booking: <input type="text" name="name" ><br>

  	<h3> Film details</h3>

	<p>Film to watch:</p> 

    	<select id ="selectbox" name="booking_movie" class="form-control">
            <option>Select</option>
            <option value="Avengers: Infinity wars">Avengers: Infinity wars</option>
            <option value="Deadpool">Deadpool</option>
			<option value="Mission: Impossible - Fallout">Mission: Impossible - Fallout</option>
			<option value="The Meg">The Meg</option>			
			<option value="Jurassic World">Jurassic World</option>
			<option value="Antman and the wasp">Antman and the wasp</option>            
			</select> <br>
		 
  	<p>Date and time</p>
		 
	<label for="bookingTime">Enter time: </label>
  <input id="bookingTime" type="time" name="time" min="08:00" max="23:00" required>
  <span class="validity"></span><br>



    <label for="bookingDate">Enter date: </label>
    <input type="date" id="bookingDate" name="booking_date" min="2018-01-01" max="2019-01-01" required>
    <span class="validity"></span><br>

	<h3>Costs</h3>
	
	<p>Quickly find out how much it costs for any number of children or adults, or how many adults and children can attend for a given amount. 
	If you are satisfied you can proceed to paypal.</p>
	
      <table id = "computed_props">
         <tr>
		 <td>Number of adults: </td> 
		 <td><input type = "text" name="number_of_adults" v-model = "counterAdult" onkeyup="add()"> </td>
		 </tr>
         <tr>
		 <td>Cost for this many adults: </td>
		 <td><input type = "text" name="cost_of_adults" v-model = "costAdult" onkeyup="add()"> </td>     
         </tr>
		 <tr>
		 <td>Number of children: </td>
		 <td><input type = "text" name="number_of_children" v-model = "counterChild" onkeyup="add()"> </td>
		 </tr>
		 <tr>
		 <td>Cost for this many children:</td>
		 <td><input type = "text" name="cost_of_children" v-model = "costChild" onkeyup="add()"> </td>     
		 </tr>
		 <tr>
		 <td>Total cost: </td>
		 <td><input type ="text" name ="total_cost" v-model = "costTotal"> </td>
		 </tr>

		</table>


		<script>
	
	function validateForm() {
    var nameformat = document.bookto.name.value;

    if (nameformat == "" ) {
        alert("Please enter the name of the person booking.");
        return false;
    }
	
	    var movieformat = document.bookto.booking_movie.value;

	    if (movieformat == "Select" ) {
        alert("Please enter a movie to watch.");
        return false;
    }
	
		var adultnumber = document.bookto.number_of_adults.value;
		var childnumber = document.bookto.number_of_children.value;

	    if (adultnumber == 0 || childnumber === 0) {
        alert("Please enter at least one adult or child.");
        return false;
    }
	
	
    }
	
	    var vm = new Vue({
            el: '#computed_props',
            data: {
               counterAdult : 0,
               costAdult: 0,
               counterChild : 0,
               costChild: 0,
			   costTotal: 0
            },
            methods: {
            },
            computed :{
            },
            watch : {
               counterAdult:function(val) {
                  this.counterAdult = val;
                  this.costAdult = (val * 7.99);
               },
               costAdult : function (val) {
                  this.counterAdult = Math.floor(val/ 7.99) ;
                  this.costAdult = val;
               },
			   
			   counterChild:function(val) {
                  this.counterChild = val;
                  this.costChild = (val * 5.99);
               },
               costChild : function (val) {
                  this.counterChild = Math.floor(val/ 5.99) ;
                  this.costChild = val;
               },
			   
            }
         });
	

function add() {

var costAdult=window.document.bookto.cost_of_adults.value;

var costChild=window.document.bookto.cost_of_children.value;

var costTotal=parseFloat(costAdult)+parseFloat(costChild);

window.document.bookto.total_cost.value=costTotal;

}

	</script>
	
		<input type="submit" name="submit" value="Submit">

	
	
	</form>
	

	<pre id="output"></pre>
	
</div>
</body>

</html>